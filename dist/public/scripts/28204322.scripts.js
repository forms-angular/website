var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n.util.clone(e[r]));return t;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var i in t)r[i]=t[i];return r},insertBefore:function(e,t,r,i){var a=(i=i||n.languages)[e];if(2==arguments.length){r=arguments[1];for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s]);return a}var o={};for(var l in a)if(a.hasOwnProperty(l)){if(l==t)for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);o[l]=a[l]}return n.languages.DFS(n.languages,function(t,n){n===i[e]&&t!=e&&(this[t]=o)}),i[e]=o},DFS:function(e,t,r,i){i=i||{};for(var a in e)e.hasOwnProperty(a)&&(t.call(e,a,e[a],r||a),"Object"!==n.util.type(e[a])||i[n.util.objId(e[a])]?"Array"!==n.util.type(e[a])||i[n.util.objId(e[a])]||(i[n.util.objId(e[a])]=!0,n.languages.DFS(e[a],t,a,i)):(i[n.util.objId(e[a])]=!0,n.languages.DFS(e[a],t,null,i)))}},plugins:{},highlightAll:function(e,t){var r={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",r);for(var i,a=r.elements||document.querySelectorAll(r.selector),s=0;i=a[s++];)n.highlightElement(i,!0===e,r.callback)},highlightElement:function(t,r,i){for(var a,s,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(a=(o.className.match(e)||[,""])[1],s=n.languages[a]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var l={element:t,language:a,grammar:s,code:t.textContent};if(n.hooks.run("before-sanity-check",l),l.code&&l.grammar)if(n.hooks.run("before-highlight",l),r&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){l.highlightedCode=e.data,n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(l.element),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},c.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else l.highlightedCode=n.highlight(l.code,l.grammar,l.language),n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(t),n.hooks.run("after-highlight",l),n.hooks.run("complete",l);else n.hooks.run("complete",l)},highlight:function(e,t,i){var a=n.tokenize(e,t);return r.stringify(n.util.encode(a),i)},tokenize:function(e,t,r){var i=n.Token,a=[e],s=t.rest;if(s){for(var o in s)t[o]=s[o];delete t.rest}e:for(var o in t)if(t.hasOwnProperty(o)&&t[o]){var l=t[o];l="Array"===n.util.type(l)?l:[l];for(var c=0;c<l.length;++c){var u=l[c],d=u.inside,p=!!u.lookbehind,m=!!u.greedy,f=0,g=u.alias;u=u.pattern||u;for(var h=0;h<a.length;h++){var v=a[h];if(a.length>e.length)break e;if(!(v instanceof i)){u.lastIndex=0;var w=u.exec(v),b=1;if(!w&&m&&h!=a.length-1){var y=a[h+1].matchedStr||a[h+1],k=v+y;if(h<a.length-2&&(k+=a[h+2].matchedStr||a[h+2]),u.lastIndex=0,!(w=u.exec(k)))continue;if((C=w.index+(p?w[1].length:0))>=v.length)continue;var x=w.index+w[0].length,$=v.length+y.length;if(b=3,x<=$){if(a[h+1].greedy)continue;b=2,k=k.slice(0,$)}v=k}if(w){p&&(f=w[1].length);var C=w.index+f,x=C+(w=w[0].slice(f)).length,P=v.slice(0,C),A=v.slice(x),F=[h,b];P&&F.push(P);var S=new i(o,d?n.tokenize(w,d):w,g,w,m);F.push(S),A&&F.push(A),Array.prototype.splice.apply(a,F)}}}}}return a},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var i,a=0;i=r[a++];)i(t)}}},r=n.Token=function(e,t,n,r,i){this.type=e,this.content=t,this.alias=n,this.matchedStr=r||null,this.greedy=!!i};if(r.stringify=function(e,t,i){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return r.stringify(n,t,e)}).join("");var a={type:e.type,content:r.stringify(e.content,t,i),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:i};if("comment"==a.type&&(a.attributes.spellcheck="true"),e.alias){var s="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(a.classes,s)}n.hooks.run("wrap",a);var o="";for(var l in a.attributes)o+=(o?" ":"")+l+'="'+(a.attributes[l]||"")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'" '+o+">"+a.content+"</"+a.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var t=JSON.parse(e.data),r=t.language,i=t.code,a=t.immediateClose;_self.postMessage(n.highlight(i,n.languages[r],r)),a&&_self.close()},!1),_self.Prism):_self.Prism;var i=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return i&&(n.filename=i.src,document.addEventListener&&!i.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=.$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},Prism.languages.css.atrule.inside.rest=Prism.util.clone(Prism.languages.css),Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:Prism.languages.css,alias:"language-css"}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag)),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript,"undefined"!=typeof self&&self.Prism&&self.document&&Prism.languages.markup&&(Prism.plugins.UnescapedMarkup=!0,Prism.hooks.add("before-highlightall",function(e){e.selector+=", .lang-markup script[type='text/plain'], .language-markup script[type='text/plain'], script[type='text/plain'].lang-markup, script[type='text/plain'].language-markup"}),Prism.hooks.add("before-sanity-check",function(e){if("markup"==e.language){if(e.element.matches("script[type='text/plain']")){var t=document.createElement("code");return(n=document.createElement("pre")).className=t.className=e.element.className,e.code=e.code.replace(/&lt;\/script(>|&gt;)/gi,"<\/script>"),t.textContent=e.code,n.appendChild(t),e.element.parentNode.replaceChild(n,e.element),void(e.element=t)}var n=e.element.parentNode;!e.code&&n&&"pre"==n.nodeName.toLowerCase()&&e.element.childNodes.length&&"#comment"==e.element.childNodes[0].nodeName&&(e.element.textContent=e.code=e.element.childNodes[0].textContent)}})),function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var t,n,r,i;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),(r=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&r.length){if((i=r.data("collapse"))&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,a=function(){"show"==n.type&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,a):a())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),a=e.extend({},e.fn.collapse.defaults,r.data(),"object"==typeof n&&n);i||r.data("collapse",i=new t(this,a)),"string"==typeof n&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,r=e(this),i=r.attr("data-target")||t.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),a=e(i).data("collapse")?"toggle":r.data();r[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(a)})}(window.jQuery),function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery);var websiteApp=angular.module("websiteApp",["ngRoute","formsAngular","ui.date","ui.grid","ui.grid.selection","ngCkeditor","fng.uiSelect","uploadModule","angularCSS","fng.uiBootstrapDate","ui.bootstrap.datetimepicker","fng.uiBootstrapDateTime","fng.colourPicker","fngAuditModule"]);websiteApp.directive("ngPrism",[function(){return{restrict:"A",link:function(e,t){t.ready(function(){-1!==t[0].className.indexOf("language-markup")&&(t[0].innerHTML="\x3c!--\n"+t[0].innerHTML.replace(" ng-scope","")+"\n--\x3e"),Prism.highlightElement(t[0])})}}}]),websiteApp.config(["$routeProvider",function(e){e.otherwise({redirectTo:"/"})}]).controller("DemoCtrl",["$scope","$location","$anchorScroll",function(e,t,n){e.scrollToSection=function(e){t.hash(e),n()}}]),websiteApp.frameworks=["bs2","bs3"],websiteApp.defaultFramework="bs2",formsAngular.config(["$locationProvider","cssFrameworkServiceProvider","routingServiceProvider",function(e,t,n){n.start({fixedRoutes:[{route:"/",options:{templateUrl:"partials/landing-page.html"}},{route:"/get-started",options:{templateUrl:"partials/get-started.html"}},{route:"/forms",options:{templateUrl:"partials/forms.html"}},{route:"/schemas",options:{templateUrl:"partials/schemas.html"}},{route:"/plugins",options:{templateUrl:"partials/plugins.html"}},{route:"/more",options:{templateUrl:"partials/more.html"}},{route:"/in-the-wild",options:{templateUrl:"partials/in-the-wild.html"}},{route:"/supported-by",options:{templateUrl:"partials/supported-by.html"}},{route:"/examples",options:{templateUrl:"partials/examples.html"}},{route:"/api-docs",options:{templateUrl:"partials/api-docs.html"}},{route:"/404",options:{templateUrl:"partials/404.html"}},{route:"/z_custom_form/new",options:{templateUrl:"partials/custom-new.html"}},{route:"/z_custom_form/:id/edit",options:{templateUrl:"partials/custom-edit.html"}},{route:"/z_custom_form/:form/new",options:{templateUrl:"partials/custom-new.html"}},{route:"/z_custom_form/:form/:id/edit",options:{templateUrl:"partials/custom-edit.html"}}],routing:"ngroute",html5Mode:!1,variants:websiteApp.frameworks}),t.setOptions({framework:websiteApp.defaultFramework})}]),websiteApp.css={bs2:["styles/main-bs2.css","bower_components/select2/select2.css"],bs3:["styles/main-bs3.css","bower_components/select2/select2.css"]},websiteApp.cssLoaded=!1,websiteApp.run(["$location","$css","cssFrameworkService",function(e,t,n){if(9e3===e.$$port){var r,i=e.path().slice(1);-1!==websiteApp.frameworks.indexOf(i)?(n.setFrameworkForDemoWebsite(i),(r=e.path().slice(1+i.length))[0]||(r="/")):i=websiteApp.defaultFramework,t.add(websiteApp.css[i]),r&&e.path(r)}else t.add(["styles/201712091704app.css"])}]).controller("CSSSwitchCtrl",["$location","$scope","cssFrameworkService","$css",function(e,t,n,r){9e3===e.$$port&&t.$on("fngFormLoadStart",function(e,t){t.variant&&t.variant!==n.framework()&&(r.remove(websiteApp.css[n.framework()]),n.setFrameworkForDemoWebsite(t.variant),r.add(websiteApp.css[n.framework()]))})}]),websiteApp.controller("BEnhancedSchemaCtrl",["$scope","$data","$timeout",function(e,t){function n(e){var t=e?"lightgreen":"lightpink";angular.element(document.querySelector("#cg_f_accepted")).css("background-color",t)}e.record=t.record,t.dropDownDisplay="Custom Dropdown",e.doAlert=function(t,n){var r=t;n&&(r+="\nThe id is "+e.record._id),alert(r)},e.changeCase=function(){function t(t){for(var n in e.record)"_id"!==n&&"string"==typeof e.record[n]&&(e.record[n]="lower"===t?e.record[n].toLowerCase():e.record[n].toUpperCase())}t(e.record.surname===e.record.surname.toLowerCase()?"upper":"lower")},e.contextMenu=[{fn:e.doAlert,args:["Reading the data",!0],listing:!1,creating:!1,editing:!0,text:"Demonstrate reading the data"},{fn:e.changeCase,listing:!1,creating:!1,editing:!0,text:"Demonstrate modifying the data"},{fn:e.doAlert,args:["Big process",!1],listing:!0,creating:!1,editing:!1,text:"Run some file wide process"}],e.onAllReady=function(){angular.element(document.querySelector("#f_accepted")).on("change",function(){n(e.record.accepted)}),void 0!==e.record.accepted&&n(e.record.accepted)}}]),websiteApp.controller("BEnhancedSchemaJustnameandpostcodeCtrl",["$scope","$data",function(e,t){e.record=t.record,t.modelNameDisplay="Another override",t.dropDownDisplay="Custom 2nd Level",e.contextMenu=[{divider:!0},{fn:e.doAlert,args:["Reading the data 2",!0],listing:!1,creating:!1,editing:!0,text:"Demonstrate reading the data 2"}]}]),websiteApp.controller("DArrayExampleCtrl",["$scope","$data",function(e,t){e.disableFunctions=t.disableFunctions,e.dataEventFunctions=t.dataEventFunctions,e.record=t.record,e.disableFunctions.isDeleteDisabled=function(e,t){return t.accepted},e.dataEventFunctions.onAfterCreate=function(e){alert("Here is an example onAfterCreate event. "+JSON.stringify(e))}}]),websiteApp.controller("HDeepNestingCtrl",["$data",function(e){e.modelNameDisplay="Nesting (work in early progress - buggy)"}]),websiteApp.controller("InTheWildCtrl",["$scope",function(e){e.sites=[{url:"http://www.caremarkjobs.co.uk",img:"caremarkjobs.png",text:"Recruitment site for a small business"},{url:"https://connectedcommunitycare.org",img:"ccc.png",text:"Statutory reports for social care in Australia",tags:["Login Required"]},{img:"plait.png",text:"Mobile care planning",tags:["In development"]}]}]),websiteApp.directive("emailField",["$compile","$filter","pluginHelper","formMarkupHelper","cssFrameworkService",function(e,t,n,r,i){return{restrict:"E",replace:!0,priority:1,compile:function(){return function(t,a,s){var o,l=n.extractFromAttr(s,"emailField");o=n.buildInputMarkup(t,s.model,l.info,l.options,!1,!1,function(e){var t={};return"bs2"===i.framework()?(t.prepend='<div class="input-prepend"><span class="add-on">@</span>',t.append="</div>"):(t.prepend='<div class="input-group"><div class="input-group-addon '+e.compactClass+'">@</div>',t.append="</div>"),t.prepend+r.generateSimpleInput(e.common+r.addTextInputMarkup(e,l.info,""),l.info,l.options)+t.append}),a.replaceWith(e(o)(t))}}}}]),websiteApp.directive("affix",["$compile","cssFrameworkService",function(e,t){return{restrict:"E",replace:!0,templateUrl:"/scripts/template/affix-"+t.framework()+".html",compile:function(){var t=$("body"),n=[];return{post:function(r,i){r.affixes=n,$(".affix-section",t).find("section").each(function(){var t=$(this);n.push({id:t.attr("id"),name:t.attr("name")}),e(i)(r)})}}}}}]).directive("affixScroll",["$window",function(e){return{link:function(t,n){var r,i=n.offset().top-80,a=i+n.height()-80;angular.element(e).on("scroll.affix-scroll",function(){var t=n.attr("id");if(angular.isDefined(e.pageYOffset))r=e.pageYOffset;else{var s=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;r=s.scrollTop}var o=$("li#"+t+"Opt");i<r&&r<a?o.hasClass("active")||o.addClass("active"):o.hasClass("active")&&o.removeClass("active")})}}}]).directive("uiScrollfix",["$window",function(e){return{require:"^?uiScrollfixTarget",link:function(t,n,r,i){function a(){var t;if(angular.isDefined(e.pageYOffset))t=e.pageYOffset;else{t=(document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body).scrollTop}!n.hasClass("ui-scrollfix")&&t>r.uiScrollfix?n.addClass("ui-scrollfix"):n.hasClass("ui-scrollfix")&&t<r.uiScrollfix&&n.removeClass("ui-scrollfix")}var s=n[0].offsetTop,o=i&&i.$element||angular.element(e);r.uiScrollfix?"string"==typeof r.uiScrollfix&&("-"===r.uiScrollfix.charAt(0)?r.uiScrollfix=s-parseFloat(r.uiScrollfix.substr(1)):"+"===r.uiScrollfix.charAt(0)&&(r.uiScrollfix=s+parseFloat(r.uiScrollfix.substr(1)))):r.uiScrollfix=s,o.on("scroll",a),t.$on("$destroy",function(){o.off("scroll",a)})}}}]).directive("uiScrollfixTarget",[function(){return{controller:["$element",function(e){this.$element=e}]}}]),websiteApp.controller("FriendCtrl",["$scope","$routeParams","$location","$http",function(e,t,n,r){e.frdShowAdd=!1,e.frdNewFriend={},e.selectedFriend=null,e.frdHideDetails=function(){e.record.friendList&&e.record.friendList.length>0?(e.frdPopupName="Move mouse over a friend",e.frdPopupComments="to see their details"):(e.record.surname?e.frdPopupName=(e.record.forename||"")+" "+e.record.surname+" is Norman No Mates!":e.frdPopupName="",e.frdPopupComments="Click on the button ---\x3e to add a friend")},e.$on("fngCancel",function(){_.find(e.record.friendList,function(t){return t.friend===e.selectedFriend})||(e.selectedFriend=null,e.frdHideDetails())}),e.showFriendDetails=function(t){r.get("/api/a_unadorned_schema/"+e.textToId(t.friend),{cache:!0}).then(function(n){var r=n.data;r&&!1!==r.success?(e.selectedFriend=t,e.frdPopupName=r.forename+" "+r.surname,e.frdPopupComments=t.comment):e.frdPopupName="This friend does not exist - someone may have deleted the record"}).error(function(){e.popupName="Error reading friend details",e.popupComments="Please try again"})},e.frdRemoveFriend=function(t){e.selectedFriend=null,e.frdHideDetails(),e.record.friendList.splice(t,1),e.baseForm.$setDirty()},e.selectedClass=function(t){return t===e.selectedFriend?"selectedFriend":""},e.frdShowAddForm=function(){e.frdShowAdd=!0,e.frdNewFriend={}},e.textToId=function(t){return e.f_friendList_friend_ids[e.f_friendList_friendOptions.indexOf(t)]},e.frdSaveFriend=function(){e.record.friendList=e.record.friendList||[],e.record.friendList.push(e.newFriend.friendList),e.selectedFriend=e.newFriend.friendList,e.frdShowAdd=!1,e.newFriend={},e.baseForm.$setDirty()},e.frdHideDetails()}]).directive("friends",function(){return{restrict:"E",replace:!0,priority:1,controller:"FriendCtrl",templateUrl:"scripts/template/friends.html"}}),websiteApp.directive("timezone",function(){return{require:"ngModel",link:function(e,t,n,r){r.$validators.timezone=function(e){if(r.$isEmpty(e))return!0;if(!Intl||!Intl.DateTimeFormat().resolvedOptions().timeZone)throw"Time zones are not available in this environment";try{return Intl.DateTimeFormat(void 0,{timeZone:e}),!0}catch(e){return!1}}}}});